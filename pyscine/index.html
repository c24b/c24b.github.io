<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>PyWebMining</title>

        <meta name="author" content="Constance de Quatrebarbes">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <style>

            @font-face {
                font-family: Symbola;
                src: url(font/Symbola.ttf);
            }

            .reveal span.py {
                font-weight: bolder;
                //background-color: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
            }

            .reveal .py:before {
                font-family: "Symbola";
                background-color: #568ebd;
                content: 'üêç';
                display: inline-block;
                -webkit-transform: scaleX(-1);
                transform: scaleX(-1);
                font-weight: normal;
                margin-right: 4px;
                //background-color: rgba(255, 255, 255, 0.8);
                padding: 4px;
                color: black;
                border-radius: 20px;
            }
            .reveal .py:after {
                font-family: "Symbola";
                background-color: #ffd54f;
                content: 'üêç';
                font-weight: normal;
                margin-left: 4px;
                //background-color: rgba(255, 255, 255, 0.2);
                color: black;
                padding: 4px;
                border-radius: 20px;
                display: inline-block;
            }
            .reveal .cookie:before {
                font-family: "Symbola";
                content: 'üç™ ';
                font-weight: normal;
                //background-color: rgba(255, 255, 255, 0.8);
                padding: 4px;
                margin-right: -6px;
            }
            .reveal .cookie:after {
                font-family: "Symbola";
                content: 'üç™ ';
                font-weight: normal;
                //background-color: rgba(255, 255, 255, 0.8);
                padding: 4px;
            }

            .reveal .slides section .fragment.result {
                color: rgba(237, 237, 237, 0.2);
                opacity: 0.2;
                font-weight: normal;
            }
            .reveal .slides section .fragment.result.visible {
                color: #0066FF;
                opacity: 1;
                font-weight: bolder;
            }

            .reveal .slides section .result {
                display: block;
                margin-bottom: 16px;
                clear: both;
                background-color: rgba(255, 255, 255, 0.1);
            }

            .right {
                float: right;
            }

            .reveal section img {
                border: 0;
                background: transparent;
                box-shadow: None;
            }

            .reveal a.baseline:not(.image) {
                vertical-align: text-bottom !important;
            }

            .reveal span.ref.link {
                font-size: 60%;
                padding-left: 0.1em;
                vertical-align: super;
            }
            .reveal div.refs {
                margin-top: 40px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
                text-align: left;
                font-size: 70%;
                padding-left: 16px;
            }
            .reveal span.ref.anchor {
                font-size: 60%;
                padding-left: 1em;
                vertical-align: super;
            }

            .reveal h2 span.mini {
                font-size: 70%;
                padding-left: 8px;
            }

            .reveal ul {
                margin-bottom: 15px;
            }

            .reveal pre code {
                max-height: 540px;
                font-size: 88%;
            }

            .reveal h2 img {
                height: 160px;
                vertical-align: middle;
                padding-left: 20px;
            }

            .reveal div.source {
                text-align: right;
                width: 100%;
                position: relative;
                font-size: 14px;
                margin-top: -14px;
                right: 5%;
            }

            .reveal .symbol {
                font-family: "Symbola";
                font-size: 60px;
             }

            .reveal .schema {
                font-size: 60%;
                line-height: 1.4;
                border-collapse: collapse;
                table-layout: fixed;
                width: 100%;
            }

            .reveal .schema td {
                text-align: center;
                vertical-align: middle;
                padding: 20px 0;
                margin: 20px 0;
            }

            .reveal .schema tr:nth-of-type(2) td:nth-of-type(even) {
                font-size: 60px;
                padding: 0 40px;
            }

            .reveal .schema tr:nth-of-type(2) td:nth-of-type(odd) {
                background-color: rgba(255, 255, 255, 0.1);
            }

            .reveal .schema td pre {
                font-size: 100%;
                box-shadow: None;
                white-space: nowrap;
            }

            .left {
                float: left;
            }

            .top {
                display: block;
            }
            
            .reveal table.xpath {
                border-collapse: collapse;
                table-layout: fixed;
                width: 100%;
                font-size: 70%;
                line-height: 1.1;
            }
            .reveal table.xpath tr:nth-of-type(1) td {
                border-bottom: 1px solid white;
            }

            .reveal p {
                text-align: left;
            }

            .reveal ul.links {
                list-style-type: None;
                margin-bottom: 80px;
            }

            .reveal .links .symbol {
                display: inline-block;
                width: 80px;
            }

        </style>
    </head>
<body>
        <div class="reveal">
            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section id="0">
                    <h2>WebMining</h2>
                    <h3>with</h3>
                    <h3> <span class='py'>Python</span></h3>
                    
                    <small>by <a href="http://twitter.com/4barbes">c24B</a></small>
                    <br />
                    <small>for <a href="https://hackinscience.github.io/">Hackinscience</a> Python Crash Course</small>
                    <br />
                    <br />
					<small>Inspired by <a href="http://datapublica.github.io/scrapython/#/">DataPublica</a>: a special thanks to <a href="http://twitter.com/samuelcharron">@samuelcharron</a></small>
                </section>
                <section id="1">
                    <h2>Webmining with Python</h2>
                    <ul>
                        <li><a href="#/2">Webmining?</a></li>
                        <li><a href="#/3">Tools</a></li>
                        <li><a href="#/4">Workshop</a></li>
                    </ul>
                </section>
                <section id="2">
                    <section>
                        <h2>Webmining?</h2>
                        <h3>‚á©</h3>
                    </section>
                    <section id="webmining">
						<ul>
						<li><a class='baseline' href="http://en.wikipedia.org/wiki/Web_mining">Webmining</a> is the application of <a href="http://en.wikipedia.org/wiki/Datamining"> data mining</a> techniques to discover patterns from the Web</li>
						<li>It's also a misused word to say:</li> 
						</ul>
						<blockquote>"collect data from the Web in order to constitute datasets and explore it"</blockquote>
                        
                    </section>
                    <section id="data scrapping">
						<h2><span class='symbol top'><img src="img/scrapy.png"></span> Data Scrapping: Collect Data</h2>
                        <ul>
                            <li>Transform non structured data into structure dataset</li>
                            <li>Output Format:</li>
                            <ul>
								<li>Files (small datasets): Json, CSV, ...</li>
							</ul>
							<ul>
								<li>Databases (big datasets)</li>
							</ul>
                        </ul>
                    </section>
					<section id="data-mining">
						<span class='symbol top'><img src="img/loupe.png"></span>
                        <h2>Data Mining: Finding patterns</h2>
                        <ul>
                            <li>Anomaly detection</li>
                            <li>Association rule learning </li>
                            <li>Clustering</li>
                            <li>Classification</li>
                            <li>Regression</li>
                            <li>Summarization</li>
                        </ul>
                    <p><span class='symbol'>‚òû</span>See <a href="http://nbviewer.ipython.org/github/hackinscience/showoff-pysci/blob/master/showoff-pysci.ipynb">Scientific Computing</a> tutorial by <a href="www.twitter.com/mazieres">@h4nt1</a></p>
                    </section>
                    <section>
                    <h2>Data SCrapping & Data Mining</h2>
                    <h2>applied to web</h2>
                    <h3>‚á©</h3>
                    </section>
                    <section>
                        <h2>Web Crawling <img src="img/spider.png"></h2>
                        <ul>
                            <li>Web: data not well structured</li>
                            <li>Structure: text, links between pages, visual structure</li>
                            <li>Usage: reading, textual search engine, study of relationships</li>
                            <li>No need to know the website: following the links blind</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Web Scraping</h2>
                        <ul>
                            <li>Hidden structure: mostly a database beside the website</li>
                            <li>A page: one fragment of this database</li>
                            <li>Rebuild a database from the entire websiter</li>
                            <li>Usage: crossing  data, structured search engines, specific studies</li>
                            <li>Absolute need to know the website: specific extraction</li>
                        </ul>
                    </section>
				</section>
				<section id="3">
                        <h2><span class='symbol'>‚öí</span>Tools<span class='symbol'>‚öí</span></h2>
                        <table class='schema'>
                            <tr>
                                <td><span class='symbol top'>&#9729;</span>Internet</td>
                                <td></td>
                                <td><span class='symbol top'>‚áÖ</span>t√©l√©chargement</td>
                                <td></td>
                                <td><span class='symbol left'>üî§</span>cha√Æne de caract√®res</td>
                                <td></td>
                                <td><span class='symbol left'>üå≤ </span>document (DOM)</td>
                                <td></td>
                                <td><span class='symbol top'>‚ò∞</span>dataset</td>
                            </tr>
                            <tr>
                                <td class='symbol'>&#x1f4c4;</td>
                                <td>‚á¢</td>
                                <td class='symbol top'>‚áÖ</td>
                                <td>‚á¢</td>
                                <td><pre>"&lt;html&gt;"</pre></td>
                                <td>‚á¢</td>
                                <td><pre>&lt;html&gt;<br>&nbsp;&nbsp;&lt;body&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;</pre></td>
                                <td>‚á¢</td>
                                <td><img src="img/db.png"></td>
                            </tr>
                            <tr>
								<td></td>
                                <td></td>
                                <td>
                                    <ul>
										<li><a href="#/4">Urllib</a></li>
                                        <li><a href="#/4">Requests</a></li>
                                    </ul>
                                </td>
                                <td></td>
                                <td>
                                    <ul>
										
                                        <li><a href="#/5">BeautifulSoup</a></li>
                                        <li><a href="#/5">HTML5</a></li>
                                        <li><a href="#/7">Regular Expressions</a></li>
                                    </ul>
                                </td>
                                <td></td>
                                <td>
                                    <ul>
										<li><a href="#/8/1">LXML</a></li>
                                        <li><a href="#/6/1">XPaths</a></li>
                                        <li><a href="#/5/2">HTML and CSS Selectors</a></li>
                                        
                                    </ul>
                                </td>
                                <td></td>
                                <td>
                                    <ul>
										<li>CSV</li>
                                        <li>JSON</li>
                                        <li>Database</li>
                                    </ul>
                                </td>
                        </table>
                    </section>
                </section>
				<section id="4">
                    <section id="title">
                        <h2><span class="symbol top">‚áÖ</span>Requests ? <img src="img/requests.png"></h2>
                        <h3>‚á©</h3>
                    </section>
                    <section id="req">
                        <h2>Requests</h2>
                        <ul>
                            <li><a href="http://docs.python.org/dev/library/urllib.request.html">urllib</a>: a library that comes with python. Not very handy, different versions in use in python.</li>
                            <li><a href="http://python-requests.org/">Requests</a> takes urllib to present a simple, unified and complete interface</li>
                        </ul>
                    </section>
                    <section id="req-ex">
                        <h2>Using Requests: example</h2>
                        <pre><code class='snippet exec python' data-trim contenteditable data-noescape>import requests

url = "http://fr.wikipedia.org/wiki/Araign√©e"
resultat = requests.get(url)

resultat.status_code
<code class=' result'>200</code>resultat.text[:104]
<code class=' result'>&lt;!DOCTYPE html&gt;
&lt;html lang="fr" dir="ltr" class="client-nojs"&gt;
&lt;head&gt;
&lt;title&gt;Araneae - Wikip√©dia&lt;/title&gt;</code></code></pre><div class='source'>  <a class='source' href='examples/requests-intro.py'>  source  </a></div>
                    </section>
                </section>
                <section id="5">
					<section>
					<h2><span class="symbol left">üî§</span>Beautiful Soup? <img src="img/bs.jpg"></h2>	
					<h3>‚á©</h3>
					</section>
					<section>
						<h2>BeautifulSoup</h2>
							<ul>
								<li><a href="www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a>: a simple module to access to html entities</li>
							</ul>
							<ul></ul>
								<li>Let's you find the data using html selectors and css class</li>
								<li>Avoid to use the syntax of <a href="#/6/1"> XPath</a></li>
							</ul>
					<section>
						<h2>Using BeautifulSoup: example</h2>
							<pre><code class='snippet exec python' data-trim contenteditable data-noescape>from bs4 import BeautifulSoup
doc = """
&lt;html&gt;&lt;body&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;title&gt;Hello World&lt;/title&gt;
  &lt;ul class='container'&gt;
	  &lt;li id='li-1'&gt;premier li&lt;/li&gt;
	  &lt;li id='li-2'&gt;deuxieme li&lt;/li&gt;
  &lt;/ul&gt;
&lt;/body&gt;&lt;/html&gt;
"""
# Create a document from a string
soup = BeautifulSoup(doc)
# Select the element
title = soup.title
text_title = soup.title.text
>>>print(text_title)
'Hello World'								
#Find all elements
list = soup.find_all('li')
>>>print(list)
[premier li,deuxieme li]
						</code></pre>
						<div class='source'>   <a class='source' href='examples/beautifulsoup-intro.py'>  source  </a></div>
                </section>
					<section>
                    <h2>Beautiful Soup : Selecting html tags (2/2)</h2>
                    BeautifulSoup let's you access the html element by tag, class, next and previous
                    <pre><code class='snippet exec python' data-trim contenteditable data-noescape>
		#finding first element with tag &lt;h1&gt;
		soup.find('h1')
		#finding next element with tag &lt;h3&gt;
		first = soup.find('h2')
		second = first.next_sibling
		#finding all links
		soup.find_all('a')
		#finding one element by tag and class name
		soup.find('h1',{'class':'featured')						
                    </code></pre>
                    <div class='source'><a class='source' href='http://www.crummy.com/software/BeautifulSoup/bs4/doc/'> And much more in the doc</a></div>
                    </section>
                    <section>
						<h2>Inspect the webpage</h2>
                        <p>Your web browser let's you inspect the <a href="#/8/2">dom</a>
                        and select the value of the data you want to extract </p>
                        <br/>
                        <span class='symbol'>‚òû</span> Open Chrome or Firefox, press F12</li>
                    <section>
                        <img src="img/examine.png">
                    </section>
				</section>
				<section id="6">
					<section>
						<h2><span class='symbol top'>üå≤</span>Manipulating DOM</h2>
						<p>DOM stands for <b>D</b>ocument <b>O</b>bject <b>M</b>apper.</p>
						<p></p>
                    </section>
				</section>
				
				<section id="7">
					<section>
                        <h2>Requests <img src="img/requests.png"></h2>
                        <h2>+</h2>
                        <h2>BeautifulSoup <img src="img/bs.jpg"></h2>
                        <h3>‚á©</h3>
                    </section>
					<section>
						<h2> Loading and extracting a webpage</h2>
                        <pre><code class='snippet exec python' data-trim contenteditable data-noescape>>>>import requests
>>>from bs4 import BeautifulSoup as bsoup
>>>r = requests.get('http://www.bbc.co.uk/science/0/')
# we should always verify that page is correctly loaded
# if r.status_code == 200:
>>>doc = r.text
>>>soup = bsoup(doc)
>>>print(soup.title)
&lt;title&gt;BBC Science - BBC Science&lt;/title&gt;
>>>print(soup.title.text)
BBC Science - BBC Science
						</code></pre>
                    </section>
                </section>
                
				<section id="8">
					<section>
						<h3>Now your turn!</h3>
					</section>
					<section>
						<a href="README.md"> Experiment!</a>
						
					</section>	
				</section>
				<section id="9">
					<h3> Further readings</h3>
					<ul>Other parsing tools:
					<li>LXML</li>
					<li>PyQuery</li>
					</ul>
					<ul>Webcrawler in python:
					<li>Scrapy</li>
					<li>Newspaper</li>
					</ul>
				</section>		
			</div>
		</div>
		
        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>
        <script src="lib/js/jquery-2.0.1.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                     { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

            $(function() {
                $("pre code.exec").on("keydown", function(e) {
                    // Ctrl-Enter pressed
                    if (e.ctrlKey && e.keyCode == 13) {
                        var code = $(this).children(".result").remove();
                        code = $(this).text();
                        console.log(code);
                        var self = this;
                        $.ajax("/eval", {
                            data: JSON.stringify({"code": code}),
                            method: "POST",
                            success: function(data) {
                                console.log(data.eval);
                                $(self).html(data.eval);
                                $(self).blur();
                            },
                            contentType: "application/json"
                        });
                    }
                });
            });

        </script>
</body>
</html>
